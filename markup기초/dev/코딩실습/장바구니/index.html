<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>layout1</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="grid.css">
  <style>
    *{margin: 0; padding: 0;}
    li{list-style: none;}
    body{font-family: sans-serif;}
    .center{position: relative; max-width: 800px; margin: auto;}
    section ul li{height: 280px; margin-bottom: 20px;}
    section ul li .wrap{
      position: relative;
      height: 100%;
      padding: 20px; color:#fff;
      box-sizing: border-box;
      margin:10px;
      overflow: hidden;
    }
    section ul li:nth-child(1) .wrap{background: #39516d;}
    section ul li:nth-child(2) .wrap{background: #fec6c7;}
    section ul li:nth-child(3) .wrap{background: #a98342;}
    section ul li:nth-child(4) .wrap{background: #f18988;}
    section ul li:nth-child(6) .wrap{background: #ffd200;}
    section ul li:nth-child(7) .wrap{background: #367250;}
    section ul li:nth-child(8) .wrap{background: #94ccd9;}
    section ul li:nth-child(9) .wrap{background: #636466;}
    .btn-group{position: absolute;}
    button{border:none; background: none; font-size: 2em;}
    button.on{color: #f00;}
    .wrap h2{position: relative; font-size: 30px;}
    .wrap span{font-size: 24px; opacity: 0.5;}
    .wrap img{
      position: absolute; bottom:0; right:0; width: 100%;
    }

    .popup{
      display: none;
      position: fixed;
      background: #fff;
      width: 500px; height: 500px;
      top:50%; left:50%; transform: translate(-50%, -50%);
    }
    .popup nav ul{border-bottom:1px solid #000;}
    .popup nav li{display: inline-block;}
    .popup nav li a{}
    .popup nav li a.active{color:red;}
    .popup .tab-contents{}
    .popup .tab-contents > *{display: none;}
    .popup .tab-contents .active{display: block;}

    @media (max-width:767px) {
      ul li:nth-child(5){display: none;}
      .wrap img{width: auto;}
    }

  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
    $(function(){
      $('#popup-open').click(function(){
        $('.popup').show();
      })

      $('.btn-close').click(function(){
        $('.popup').hide();
      })

      var shoppingCount=0;
      var likeCount=0;
      //탭메뉴
      $('.popup nav a').click(function(e){
        e.preventDefault();
        $('.popup nav a').removeClass('active');
        $(this).addClass('active');
        var id=$(this).attr('href');
        $('.popup .tab-contents > div').hide();
        $(id).show();
      })

      //장바구니, 위시리스트 추가/삭제 버튼
      $('.item button').click(function(){
        $(this).toggleClass('on');

        // var name=$(this).parent().siblings('h2').text();
        // var name=$(this).parent().prev().prev().text();
        var src=$(this).parents('.wrap').find('img').attr('src');
        var name=$(this).parents('.wrap').find('h2').text();
        var nameE=$(this).parents('.wrap').find('span').text();
        var key=nameE;
        if($(this).hasClass('on')){
          // console.log('추가');
          if($(this).hasClass('fa-heart')){
            //위시리스트에 뿌리기
            $('#like ul').append(
              '<li data-key="'+nameE+'"><img src="'+src+'"/>'+
              '<h4>'+name+'<span>'+nameE+'</span></h4>'+
              '<button>삭제</button>'+
              '</li>'
            );
            // console.log('위시리스트');
          }else{
            // console.log('장바구니');
            $('#shopping ul').append(
              '<li data-key="'+nameE+'"><img src="'+src+'"/>'+
              '<h4>'+name+'<span>'+nameE+'</span></h4>'+
              '<button>삭제</button>'+
              '</li>'
            );
          }
        }else{
          // console.log('삭제');
          if($(this).hasClass('fa-heart')){
            $('#like li').each(function(){
              if($(this).data('key')==key){
                $(this).remove();
              }
            })
            // console.log('위시리스트');
          }else{
            // console.log('장바구니');

          }
        }

      })

      //동적으로 생성된 요소를 클릭하고 싶을 때 사용
      //삭제버튼을 눌렀을 때
      $('.popup ul').on('click','button',function(){
        var key=$(this).parents('li').data('key');
        var contentsName=$(this).parents('.content').attr('id');

        if(contentsName=='like'){
          console.log('위시리스트 버튼');
          $('.item li').each(function(){
            if($(this).data('key')==key){
              $(this).find('.fa-heart').removeClass('on');
            }
          })
        }else{
          console.log('장바구니 버튼');
          $('.item li').each(function(){
            if($(this).data('key')==key){
              $(this).find('.fa-shopping-cart').removeClass('on');
            }
          })
        }
        $(this).parents('li').remove();
        console.log(contentsName);
      })


    })
  </script>
</head>
<body>
  <section class="center item">
    <!-- ul>li>div[class=wrap]>img+h2+span -->
    <ul class="row">
      <li data-key="Ryan" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_ryan.jpg" alt="">
          <h2>라이언</h2>
          <span>Ryan</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Apeach" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_apeach.jpg" alt="">
          <h2>어피치</h2>
          <span>Apeach</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Frodo" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_frodo.jpg" alt="">
          <h2>프로도</h2>
          <span>Frodo</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Neo" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_neo.jpg" alt="">
          <h2>네오</h2>
          <span>Neo</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li class="col-sm-4"></li>
      <li data-key="Muzi" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_muzi.jpg" alt="">
          <h2>무지</h2>
          <span>Muzi</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Con" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_con.jpg" alt="">
          <h2>콘</h2>
          <span>Con</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Tube" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_tube.jpg" alt="">
          <h2>튜브</h2>
          <span>Tube</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
      <li data-key="Jay-G" class="col-sm-4">
        <div class="wrap">
          <img src="img/friends_jayg.jpg" alt="">
          <h2>제이지</h2>
          <span>Jay-G</span>
          <div class="btn-group">
            <button class="fas fa-heart"></button>
            <button class="fas fa-shopping-cart"></button>
          </div>
        </div>
      </li>
    </ul>
  </section>

  <button id="popup-open">팝업열기</button>

  <div class="popup">
    <button class="btn-close">닫기</button>
    <nav>
      <ul>
        <li><a href="#shopping" class="active">장바구니</a></li>
        <li><a href="#like">위시리스트</a></li>
      </ul>
      <div class="tab-contents">
        <div id="shopping" class="content active">
          <h3>장바구니 목록</h3>
          <ul></ul>
        </div>
        <div id="like" class="content">
          <h3>위시리스트 목록</h3>
          <ul></ul>
        </div>
      </div>
    </nav>
  </div>
</body>
</html>
